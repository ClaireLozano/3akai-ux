<!-- CSS -->
<link rel="stylesheet" type="text/css" href="css/tenants.css" />

<div id="tenants-container" class="oae-list-container">
    <div id="tenants-header-container"><!-- --></div>
    <div id="tenants-table">
        <ul id="tenants-table-header" class="oae-list">
            <li class="row">
                <div class="tenants-col tenants-col-edit"></div>
                <div class="col-xs-1">__MSG__ALIAS__</div>
                <div class="col-xs-2">__MSG__NAME__</div>
                <div class="col-xs-4">__MSG__HOST__</div>
                <div class="col-xs-1">__MSG__STATUS__</div>
            </li>
        </ul>
        <ul id="tenants-table-rows" class="oae-list"></ul>
    </div>
</div>

<div id="tenants-header-template"><!--
    ${listHeader((context.isGlobalAdminServer ? '__MSG__TENANTS__' : '__MSG__TENANT__'), true, actions, false)}
--></div>

<div id="tenants-row-template"><!--
    {var isOnGlobalAdminServer = context.isGlobalAdminServer || context.isTenantOnGlobalAdminServer}
    {for tenant in results}
        {var displayName = oae.api.util.security().encodeForHTMLAttribute(tenant.displayName)}
        <li id="tenants-table-row-${tenant.alias|encodeForHTMLAttribute}" data-alias="${tenant.alias|encodeForHTMLAttribute}" class="row">
            <div class="tenants-col tenants-col-edit">
                {if context.isGlobalAdminServer}
                    <a href="/tenant/${tenant.alias|encodeForURL}" title="__MSG__EDIT_TENANT__"><i class="fa fa-pencil"></i></a>
                {/if}
            </div>
            <div class="col-xs-1">
                ${tenant.alias|encodeForHTML}
            </div>
            {if oae.data.me.isGlobalAdmin}
                <div class="jeditable-container col-xs-2">
                    <div class="jeditable-field" data-alias="${tenant.alias|encodeForHTMLAttribute}" data-field="displayName">
                        ${tenant.displayName|encodeForHTML}
                    </div>
                </div>
            {else}
                <div class="col-xs-2">
                    ${tenant.displayName|encodeForHTML}
                </div>
            {/if}
            <div class="tenants-host col-xs-4">
                {if oae.data.me.isGlobalAdmin}
                    <div class="tenants-visit">
                        <a href="//${tenant.host}" title="__MSG__VISIT_TENANT__" target="_blank"><i class="fa fa-external-link tenants-visit"></i></a>
                    </div>
                    <div class="jeditable-container">
                        <div class="jeditable-field" data-alias="${tenant.alias|encodeForHTMLAttribute}" data-field="host">
                            ${tenant.host|encodeForHTML}
                        </div>
                    </div>
                {else}
                    <a href="//${tenant.host}" title="${tenant.displayName|encodeForHTMLAttribute}" target="_blank">
                        ${tenant.host|encodeForHTML}
                    </a>
                {/if}
            </div>
            <div class="col-xs-1">
                {if tenant.active}
                    <span class="text-success">__MSG__RUNNING__</span>
                {else}
                    <span class="text-error">__MSG__DISABLED__</span>
                {/if}
            </div>
            {if isOnGlobalAdminServer}
                <div class="col-xs-1">
                    {if tenant.active}
                        <button type="button" class="btn btn-warning tenants-stop" data-alias="${tenant.alias|encodeForHTMLAttribute}" data-displayName="${tenant.displayName|encodeForHTMLAttribute}">__MSG__STOP__</button>
                    {else}
                        <button type="button" class="btn btn-success tenants-start" data-alias="${tenant.alias|encodeForHTMLAttribute}" data-displayName="${tenant.displayName|encodeForHTMLAttribute}">__MSG__START__</button>
                    {/if}
                </div>
                <div class="col-xs-1">
                    <button type="button" class="btn btn-primary tenants-login" {if !tenant.active} disabled="disabled" {/if} data-alias="${tenant.alias|encodeForHTMLAttribute}">__MSG__SIGN_IN__</button>
                </div>
            {/if}
        </li>
    {/for}
--></div>

<div id="tenants-none-template"><!--
    <div class="alert alert-info">
        __MSG__NO_TENANTS_AVAILABLE__
    </div>
--></div>


<div id="tenants-login-container"><!-- --></div>

<!-- Hidden form that will be submitted for logging a global admin into a tenant.
     This is done through a hidden form as it will be a cross-domain request -->
<div id="tenants-login-template"><!--
    <form id="tenants-login-form" class="hide" action="${url|encodeForHTMLAttribute}" method="POST">
        {for attr in body}
            <input type="hidden" name="${attr_index|encodeForHTMLAttribute}" value="${attr|encodeForHTMLAttribute}" />
        {/for}
    </form>
--></div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="js/tenants.js"></script>
